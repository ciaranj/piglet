{{- if not .Values.secrets.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "piglet.fullname" . }}
  labels:
    {{- include "piglet.labels" . | nindent 4 }}
type: Opaque
stringData:
  cookie-secret: {{ .Values.secrets.cookieSecret | default (randAlphaNum 32) | quote }}
  {{- if .Values.secrets.entraTenantId }}
  entra-tenant-id: {{ .Values.secrets.entraTenantId | quote }}
  {{- end }}
  {{- if .Values.secrets.entraClientId }}
  entra-client-id: {{ .Values.secrets.entraClientId | quote }}
  {{- end }}
  {{- if .Values.secrets.entraClientSecret }}
  entra-client-secret: {{ .Values.secrets.entraClientSecret | quote }}
  {{- end }}
  {{- if .Values.secrets.googleClientId }}
  google-client-id: {{ .Values.secrets.googleClientId | quote }}
  {{- end }}
  {{- if .Values.secrets.googleClientSecret }}
  google-client-secret: {{ .Values.secrets.googleClientSecret | quote }}
  {{- end }}
  {{- if .Values.secrets.microsoftClientId }}
  microsoft-client-id: {{ .Values.secrets.microsoftClientId | quote }}
  {{- end }}
  {{- if .Values.secrets.microsoftClientSecret }}
  microsoft-client-secret: {{ .Values.secrets.microsoftClientSecret | quote }}
  {{- end }}
  {{- if .Values.secrets.smtpHost }}
  smtp-host: {{ .Values.secrets.smtpHost | quote }}
  {{- end }}
  {{- if .Values.secrets.smtpPort }}
  smtp-port: {{ .Values.secrets.smtpPort | quote }}
  {{- end }}
  {{- if .Values.secrets.smtpUser }}
  smtp-user: {{ .Values.secrets.smtpUser | quote }}
  {{- end }}
  {{- if .Values.secrets.smtpPassword }}
  smtp-password: {{ .Values.secrets.smtpPassword | quote }}
  {{- end }}
  {{- if .Values.secrets.smtpFrom }}
  smtp-from: {{ .Values.secrets.smtpFrom | quote }}
  {{- end }}
{{- end }}
